<app-dashboard-admin></app-dashboard-admin>

<div class="container mt-4">
  <h2 class="mb-4 text-primary">Liste des √âvaluations</h2>

  <ul class="list-group mb-5">
    <li *ngFor="let eval of evaluations" class="list-group-item d-flex justify-content-between align-items-start">
      <div>
        <p class="mb-1"><strong>Score:</strong> {{ eval.score }}</p>
        <p class="mb-1"><strong>Commentaires:</strong> {{ eval.comments }}</p>
        <p class="mb-1 text-muted">
          <strong>Employ√©:</strong> {{ eval.employe?.user?.prenom }} {{ eval.employe?.user?.nom }} {{ eval.employe?.user?.username }}
        </p>
      </div>
      <button class="btn btn-danger btn-sm" (click)="deleteEvaluation(eval.id!)">
        <i class="bi bi-trash"></i> Supprimer
      </button>
    </li>
  </ul>

  <div class="card">
    <div class="card-header bg-secondary text-white">
      <h3 class="mb-0">Ajouter une √©valuation</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="addEvaluation()">
        <div class="mb-3">
          <label class="form-label">Score:</label>
          <input [(ngModel)]="newEvaluation.score" name="score" type="number" class="form-control" required />
        </div>

        <div class="mb-3">
          <label class="form-label">Commentaires:</label>
          <input [(ngModel)]="newEvaluation.comments" name="comments" type="text" class="form-control" required />
        </div>

        <div class="mb-3">
          <label class="form-label">Employ√©:</label>
          <!-- üëá Ajout de la classe custom -->
          <select class="form-select"
                  [(ngModel)]="selectedEmployeId"
                  name="employeId" required>
            <option [value]="0" disabled>-- S√©lectionnez un employ√© --</option>
            <option *ngFor="let emp of employes" [value]="emp.id">
              {{ emp.user?.username || 'Utilisateur inconnu' }}
            </option>
          </select>


        </div>



        <button type="submit" class="btn btn-success">
          <i class="bi bi-plus-circle"></i> Ajouter
        </button>
      </form>
    </div>
  </div>
</div>
